<!doctype html>
<head>
<meta charset="utf-8">
<title>ä»Šæ—¥ã¯ç´ æ•°æ—¥ã‹ãª?</title>
<link rel="canonical" href="https://piyo-ko.github.io/fun_math/prime_date.html" />
<script type="text/javascript">
function about_today() {
	var t = new Date();
	//console.log("ä»Šæ—¥ã¯ç´ æ•°æ—¥ã‹ãª?\n");

	var y = t.getFullYear();
	var m = t.getMonth()+1; //getMonth()ã¯0ã€œ11ã‚’è¿”ã™ã®ã§+1ã™ã‚‹ã€‚
	var d = t.getDate();

	document.getElementById("result_txt").textContent += "ä»Šæ—¥ã¯è¥¿æš¦ã ã¨?\n";
	about_the_day(y, m, d, true, true);
	
	document.getElementById("result_txt").textContent += "\n\nå¹³æˆã ã¨?\n";
	about_the_day(y-1988, m, d, false, false);
	return(true);
}

function about_the_day(y, m, d, check_md, check_d) {
	//ã¾ãšå¹´æœˆæ—¥
	var x = d + m*100 + y*10000; //yyyymmdd (å¿…è¦ã«å¿œã˜ã¦0åŸ‹ã‚ã—ã¦ã‚ã‚‹å½¢)
	var res=factorize(x);
	if (m<10) {
		if (d<10) {
			x = d + m*10 + y*100; //yyyymd (0åŸ‹ã‚ãªã—)
			res += "\n"+factorize(x);
		} else {
			x = d + m*100 + y*1000; //yyyymdd (0åŸ‹ã‚ãªã—)
			res += "\n"+factorize(x);
		}
	} else {
		if (d<10) {
			x = d + m*10 + y*1000; //yyyymmd (0åŸ‹ã‚ãªã—)
			res += "\n"+factorize(x);
		}
	}

	//æ¬¡ã¯æœˆæ—¥ã ã‘
	if (check_md) {
		x = d + m*100;	//mmdd (ddã¯å¿…è¦ã«å¿œã˜ã¦0åŸ‹ã‚ã‚ã‚Š)
		res += "\n"+factorize(x);
		if (d<10) {
			x = d + m*10; //mmd (0åŸ‹ã‚ãªã—)
			res += "\n"+factorize(x);
		}
	}
	//æ¬¡ã¯æ—¥ã ã‘
	if (check_d) {
		if (d > 1) {
			res += "\n"+factorize(d);
		}
	}

	//console.log(res);
	document.getElementById("result_txt").textContent += res;
	return(true);
}

function factorize(n) {
	var orig=n; //é€€é¿ã—ã¦ãŠã (nãŒå¤‰åŒ–ã—å¾—ã‚‹ã‹ã‚‰)
	var dvs; //é™¤æ•°
	var idx=0; //ãã®æŒ‡æ•°
	var s=""; //å¼(æ–‡å­—åˆ—)
	var is_prime=true;	//åˆæœŸåŒ–

	// nãŒãƒ«ãƒ¼ãƒ—ã®ä¸­ã§å¤‰ã‚ã‚‹å ´åˆãŒã‚ã‚‹
	//  (ãŒã€foræ–‡ã®çµ‚äº†æ¡ä»¶ã¯ã“ã‚Œã§è‰¯ã„ç­ˆã§ã‚ã‚‹) ã“ã¨ã«æ³¨æ„
	for (dvs=2; dvs<=Math.sqrt(n); dvs++) { 
		idx=0;
		while (true) {
			if (n % dvs == 0) {
				idx++;
				n = n/dvs;
				is_prime=false;
			} else {
				break;
			}
		}
		if (idx > 0) {
			if (s != "") {
				s += "*";
			}
			s += dvs;
			if (idx > 1) {
				s += "^" + idx;
			}
		}
	}
	if (n!=1) {
		if (s != "") {
			s += "*";
		}
		s += n;
	}

	//ç©ºç™½æ–‡å­—ã§åŸ‹ã‚ã¦ã‚»ãƒ³ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹
	var orig_len, s_len;
	orig_len = orig.toString().length;
	s_len = s.length;
	if (orig_len == s_len) {
		s = orig + " = " + s;
	} else if (orig_len > s_len) {
		s = orig + " = " + s;
		for (var i=0; i < orig_len - s_len; i++) {
			s += " ";
		}
	} else {
		var prefix="";
		for (var i=0; i < s_len - orig_len; i++) {
			prefix += " ";
		}
		s = prefix + orig + " = " + s;
	}

	if (is_prime) {
		s = "ğŸ’•  " + s + "  ğŸ’•";
	}

	return(s);
}

function test_another_day() {
	document.getElementById("result_txt").textContent = "æŒ‡å®šã®å¹´æœˆæ—¥ã ã¨?\n";
	about_the_day(
		parseInt(document.getElementById("year").value),
		parseInt(document.getElementById("month").value),
		parseInt(document.getElementById("date").value),
		true, true
	);
	return(true);
}

window.onload = about_today;
</script>
<style>
body {
	padding-left: 3em; 
	padding-right: 3em; 
	padding-top: 6pt;
	color: darkred; 
    background: lemonchiffon;
}
h1 {
  color: maroon;
  background: linear-gradient(to right, peachpuff, lemonchiffon, peachpuff);
  border: peachpuff solid 2px;
  font-size: large;
  font-style: italic;
  font-family: sans-serif;
  text-align: center;
  padding-top: 6pt;
  padding-bottom: 6pt;
}
#result_txt {

	border: lightcoral dotted 12px; 
    border-radius: 36px;
	padding: 8pt; 
	background: peachpuff;//lightsalmon; 
	text-align: center; 
	font-family: 'Ricty Discord', 'Ricty', 'Courier New', monospace; 
}
p {
  text-indent: 1em;
}
nav, div {
	padding: 4pt;
}
nav {
	text-align: right; 
	position: fixed; 
	bottom: 24pt; 
	right: 24pt;
}
div {
	text-align: center;
	width: auto;
	padding-left: auto;
	padding-right: auto;
	border: 1px solid lightcoral;
}

</style>
</head>


<body>
<h1>ä»Šæ—¥ã¯ç´ æ•°æ—¥ã‹ãª?</h1>
<p>å¹´æœˆæ—¥ãƒ»æœˆæ—¥ãƒ»æ—¥ã«ã¤ã„ã¦ã€ãã‚Œãã‚Œ 0 åŸ‹ã‚ã‚ã‚Šãƒ»ãªã—ã§è€ƒãˆã¦ã€ãã®æ•°å­—ã®ä¸¦ã³ã‚’æ•´æ•°ã¨ã¿ãªã—ã¦ç´ å› æ•°åˆ†è§£ã—ã€ãã®æ—¥ä»˜ãŒã€Œç´ æ•°æ—¥ã€ã«è©²å½“ã™ã‚‹ã‹ã©ã†ã‹ã‚’èª¿ã¹ã¾ã™ã€‚ç´ æ•°æ—¥ã ã¨ğŸ’•ãŒè¡¨ç¤ºã•ã‚Œã€ç´ æ•°æ—¥ã§ãªã‘ã‚Œã°ã€ç´ å› æ•°åˆ†è§£ã—ãŸçµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<pre id="result_txt"></pre>

<div>
<form id="in">
ã¤ã„ã§ã«
<input type="text" size="6" id="year" min="1">å¹´
<input type="text" size="3" id="month" min="1" max="12">æœˆ
<input type="text" size="3" id="date" min="1" max="31">æ—¥
ã«ã¤ã„ã¦ã‚‚
<input type="button" value="çŸ¥ã‚ŠãŸã„ãª!" onclick="test_another_day();">
</form>
</div>

<nav>[<a href="../index.html">ãƒ›ãƒ¼ãƒ </a>] <a href="https://twitter.com/share" class="twitter-share-button" data-lang="ja">ãƒ„ã‚¤ãƒ¼ãƒˆ</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></nav>
</body>
</html>


